/* ========= Base ========= */
:root{
  --ink:#111827; --muted:#6b7280; --ring:#e5e7eb; --surface:#fff;
  --brand:#1d4ed8; --success:#059669;
}
.sb-body{ background:#f3f4f6; color:var(--ink); }
.card{ background:var(--surface); border:1px solid var(--ring); border-radius:16px; padding:16px; box-shadow:0 1px 2px rgba(0,0,0,.02); }

/* ========= Grid (left | right; bottom) ========= */
.deal3-grid{
  display:grid; grid-template-columns:1.15fr 1fr;
  grid-template-areas:"left right" "bottom bottom";
  gap:16px; max-width:1100px; margin:20px auto; padding:0 12px;
}
#slot-left{ grid-area:left; }
#slot-right{ grid-area:right; }
#slot-bottom{ grid-area:bottom; }
@media (max-width:900px){
  .deal3-grid{ grid-template-columns:1fr; grid-template-areas:"left" "right" "bottom"; }
}

/* ========= Gallery ========= */
.hero-wrap{ border-radius:12px; overflow:hidden; background:#e5e7eb; }
#hero-img{ width:100%; height:420px; object-fit:cover; display:block; }
.thumbs{ display:grid; grid-template-columns:repeat(3,1fr); gap:12px; margin-top:12px; }
.thumbs img{ width:100%; height:88px; object-fit:cover; border-radius:12px; cursor:pointer; outline:2px solid transparent; }
.thumbs img.active{ outline-color:var(--brand); }
.thumbs .ph{ width:100%; height:88px; border-radius:12px; background:#e5e7eb; }

/* ========= Right column ========= */
.title{ font-size:28px; margin:0 0 8px; }

/* author line + live dot */
.author-line{ display:flex; align-items:center; gap:6px; color:var(--muted); font-size:14px; margin-bottom:12px; line-height:1; }
.status-dot{ width:10px; height:10px; background:#34d399; border-radius:50%; display:inline-block; }
#author-name{ display:inline-flex; align-items:center; }
.posted{ margin-left:6px; }

/* price / discount */
.price-row{ display:flex; align-items:baseline; gap:12px; margin:6px 0 12px; }
.price-big{ font-size:36px; font-weight:800; }
.discount-text{ font-size:28px; color:var(--success); font-weight:700; }

/* CTA row */
.cta-row{ display:flex; align-items:center; gap:16px; margin-bottom:12px; }
.btn-primary{ display:inline-block; padding:12px 16px; border-radius:12px; background:#16a34a; border:1px solid #16a34a; color:#fff; text-decoration:none; font-weight:700; }

/* Icon buttons / chips (single source of truth) */
.cta-icons{ display:flex; gap:10px; align-items:center; }
.icon-btn{min-width:44px; 
  width:40px; height:40px; border:1px solid var(--ring); background:#fff;
  border-radius:12px; display:inline-flex; align-items:center; justify-content:center;
}
.icon-btn svg{ width:20px; height:20px; }
.icon-chip{
  display:inline-flex; gap:8px; align-items:center;
  padding:8px 10px; border:1px solid var(--ring); border-radius:999px; background:#fff; font-size:14px;
}
.icon-chip svg{ width:20px; height:20px; }
.cnt{ margin-left:6px; font-size:14px; }

.ico{ position:relative; display:inline-block; color:#111827; }
.ico.up, .ico.down{ background-image:url('data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='currentColor'><path d='M15 3H8c-.82 0-1.54.5-1.84 1.22l-3 7c-.09.23-.16.47-.16.73V13c0 1.1.9 2 2 2h6.31l-.95 4.57-.03.32c0 .41.17.79.44 1.06L9 22l6.41-6.41c.37-.37.59-.89.59-1.42V5c0-1.1-.9-2-2-2zM22 3h-4v12h4V3z'/></svg>'); color:#111827; }
.ico.up{ background-image:url('data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='currentColor'><path d='M2 21h4V9H2v12zM22 9h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L15 2 8.59 8.41C8.22 8.78 8 9.3 8 9.83V20c0 1.1.9 2 2 2h7c.82 0 1.54-.5 1.84-1.22l3-7c.09-.23.16-.47.16-.73V11c0-1.1-.9-2-2-2z'/></svg>'); color:#111827; }
.ico.down{ background-image:url('data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='currentColor'><path d='M15 3H8c-.82 0-1.54.5-1.84 1.22l-3 7c-.09.23-.16.47-.16.73V13c0 1.1.9 2 2 2h6.31l-.95 4.57-.03.32c0 .41.17.79.44 1.06L9 22l6.41-6.41c.37-.37.59-.89.59-1.42V5c0-1.1-.9-2-2-2zM22 3h-4v12h4V3z'/></svg>'); color:#111827; }
.ico.eye{ width:18px; height:12px; border:1.8px solid #111827; border-radius:12px / 8px; display:inline-block; }
.ico.eye:before{ content:""; position:absolute; left:50%; top:50%; width:4px; height:4px; margin:-2px 0 0 -2px; background:#111827; border-radius:50%; }
.ico.share{ width:16px; height:16px; }
.ico.share:before, .ico.share:after{ content:""; position:absolute; background:#111827; }
.ico.share:before{ width:10px; height:2px; top:8px; left:3px; transform:rotate(45deg); }
.ico.share:after{ width:2px; height:12px; top:2px; left:10px; }

/* actions / tags / text */
.actions-row{ display:flex; gap:12px; margin:6px 0 12px; }
.chip-btn{ border:1px solid var(--ring); background:#fff; border-radius:999px; padding:8px 12px; font-size:14px; }
.summary-row{ margin:12px 0; }
.tags .tag{ display:inline-block; background:#eef2ff; color:#1d4ed8; padding:4px 10px; border-radius:999px; margin-right:8px; font-size:12px; }
.desc-row .desc-title{ color:var(--muted); margin-top:6px; }
.divider{ border:0; border-top:1px solid var(--ring); margin:8px 0 12px; }
.description{ line-height:1.6; white-space:pre-wrap; }

/* ========= Comments ========= */
.comments-title{ font-size:20px; margin:0 0 12px; }
#comments-list .comment{ display:grid; grid-template-columns:40px 1fr; gap:10px; padding:12px 0; border-top:1px solid var(--ring); }
.comment .avatar{ width:40px; height:40px; border-radius:999px; background:#e5e7eb; }
.comment .meta{ color:var(--muted); font-size:12px; }
.comment .body{ font-size:14px; }
.comment-form{ display:flex; gap:10px; padding-top:12px; }
.comment-form textarea{ flex:1; border:1px solid var(--ring); border-radius:12px; padding:10px; background:#fff; }

/* ========= Visual tweaks to match reference ========= */
.deal3-grid .btn-primary{ background:#e11d48; border-color:#e11d48; color:#fff; font-weight:700; } /* pink CTA */
.deal3-grid .mini-hr{ width:40px; height:4px; background:#0f172a; border-radius:8px; margin:8px 0 12px; }

/* ========= Badge (mask icons) ========= */
/* Container resets (make sure we aren’t inheriting “muted” opacity) */
#author-badge.badge{
  opacity:1 !important; filter:none !important;
  width:18px; height:18px; margin-left:6px; vertical-align:middle; transform:translateY(1px);
}
.badge{
  display:inline-block; background-color:currentColor;
  -webkit-mask-position:center; -webkit-mask-repeat:no-repeat; -webkit-mask-size:contain;
          mask-position:center;         mask-repeat:no-repeat;         mask-size:contain;
}
.badge.is-hidden{ display:none; }

/* Verified = blue check */
.badge--verified{ color:#2563eb !important; }
.badge--verified{
  -webkit-mask-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path fill="%23000" d="M10 1.8 12 4l2.9.6.6 2.9L18 10l-2.5 2.5-.6 2.9L12 16l-2 2-2-2-2.9.6-.6-2.9L2 10l2.5-2.5.6-2.9L8 4l2-2zM8.7 10.9l-1.8-1.8-1.3 1.3 3.1 3.1 5-5-1.3-1.3-3.7 3.7z"/></svg>');
          mask-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path fill="%23000" d="M10 1.8 12 4l2.9.6.6 2.9L18 10l-2.5 2.5-.6 2.9L12 16l-2 2-2-2-2.9.6-.6-2.9L2 10l2.5-2.5.6-2.9L8 4l2-2zM8.7 10.9l-1.8-1.8-1.3 1.3 3.1 3.1 5-5-1.3-1.3-3.7 3.7z"/></svg>');
}

/* Moderator = green shield */
.badge--mod{ color:#16a34a !important; }
.badge--mod{
  -webkit-mask-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path fill="%23000" d="M10 2 3 5v5c0 4.1 2.7 7.9 7 9 4.3-1.1 7-4.9 7-9V5l-7-3z"/></svg>');
          mask-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path fill="%23000" d="M10 2 3 5v5c0 4.1 2.7 7.9 7 9 4.3-1.1 7-4.9 7-9V5l-7-3z"/></svg>');
}

/* Admin = red star */
.badge--admin{ color:#ef4444 !important; }
.badge--admin{
  -webkit-mask-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path fill="%23000" d="m10 1.5 2.4 4.9 5.4.8-3.9 3.8.9 5.4-4.8-2.5-4.8 2.5.9-5.4L2.2 7.2l5.4-.8L10 1.5z"/></svg>');
          mask-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path fill="%23000" d="m10 1.5 2.4 4.9 5.4.8-3.9 3.8.9 5.4-4.8-2.5-4.8 2.5.9-5.4L2.2 7.2l5.4-.8L10 1.5z"/></svg>');
}

/* ========= Bookmark visual state (SVG path fill) ========= */
#bookmark-btn[data-on="1"]{ color:#f59e0b; }
#bookmark-btn[data-on="1"] svg path{ fill:currentColor; }
#bookmark-btn[data-on="0"] svg path{ fill:none; }
/* --- FINAL badge rendering: inline-SVG version (crisp + aligned) --- */
.badge-svg{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  width:18px; height:18px;
  margin-left:6px;
  transform: translateY(1px);
}
.badge-svg svg{
  width:18px; height:18px; display:block;
}

/* If you ever fall back to mask badges, force them to be solid */
#author-badge.badge{
  opacity:1 !important;
  filter:none !important;
  mix-blend-mode:normal !important;
}
.badge-svg{
  display:inline-flex; align-items:center; justify-content:center;
  width:18px; height:18px; margin-left:6px; transform:translateY(1px);
  opacity:1 !important; filter:none !important; mix-blend-mode:normal !important;
}
.badge-svg svg{ width:18px; height:18px; display:block; }

.gallery img.thumb--placeholder{object-fit:contain;background:#f9fafb}

/* Guest view: comment box hint */
.guest-readonly { background: #f9fafb; cursor: not-allowed; }

textarea:disabled { background: #f3f4f6; cursor: not-allowed; }

/* --- Lightweight modal for login prompt --- */
.sb-modal-overlay{ position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:rgba(0,0,0,.45); z-index:9999; }
.sb-modal{ background:#fff; width:min(92vw, 420px); border-radius:12px; box-shadow:0 10px 25px rgba(0,0,0,.15); padding:16px 18px; }
.sb-modal h3{ margin:0 0 8px; font-size:18px; color:#111827; }
.sb-modal p{ margin:0 0 16px; color:#4b5563; }
.sb-modal .actions{ display:flex; gap:8px; justify-content:flex-end; }
.sb-btn{ appearance:none; border:0; padding:10px 14px; border-radius:10px; font-weight:600; }
.sb-btn-primary{ background:#2563eb; color:#fff; }
.sb-btn-ghost{ background:#f3f4f6; color:#111827; }

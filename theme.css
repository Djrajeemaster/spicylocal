
:root{
  --sb-accent: #ff007a;
  --sb-accent-contrast: #ffffff;
  --sb-accent-weak: color-mix(in oklab, var(--sb-accent) 12%, white);
  --sb-ring: color-mix(in oklab, var(--sb-accent) 45%, transparent);
}

/* Links & hovers */
a, .link, .nav a.active{ color: var(--sb-accent); }
a:hover{ text-decoration-color: var(--sb-accent); }

/* Primary buttons */
.button, .btn, .btn-primary, button.primary{
  background: var(--sb-accent);
  color: var(--sb-accent-contrast);
  border-color: var(--sb-accent);
}
.button:hover, .btn:hover, .btn-primary:hover, button.primary:hover{
  box-shadow: 0 6px 18px var(--sb-ring);
}

/* Outline buttons that should take accent on active */
.btn-outline.active, .chip.is-active, .tag.is-active{
  background: var(--sb-accent-weak);
  border-color: var(--sb-accent);
  color: var(--sb-accent);
}

/* Inputs focus rings */
input:focus, select:focus, textarea:focus{
  outline: none;
  box-shadow: 0 0 0 3px var(--sb-ring);
  border-color: var(--sb-accent);
}

/* Tabs / nav active state */
.tab.is-active, .tabs .active{
  border-bottom: 2px solid var(--sb-accent);
  color: var(--sb-accent);
}

/* Badges */
.badge, .badge-primary{
  background: var(--sb-accent-weak);
  color: var(--sb-accent);
  border-color: var(--sb-accent);
}
.badge-verified{
  background: var(--sb-accent-weak);
  color: var(--sb-accent);
  border: 1px solid var(--sb-accent);
  padding: 2px 6px;
  border-radius: 6px;
}

/* Pagination current */
#pagination{ display:flex; gap:8px; flex-wrap:wrap; justify-content:center; padding:10px 0; }
.pg-btn{ border:1px solid #e2e8f0; padding:6px 10px; border-radius:8px; background:#fff; cursor:pointer; min-width:36px; }
.pg-btn.is-current{ font-weight:700; box-shadow: 0 0 0 2px var(--sb-ring); border-color: var(--sb-accent); }
.pg-btn:disabled{ opacity:.5; cursor:not-allowed; }

/* NEW pill uses accent */
.badge-new{ background: var(--sb-accent); color: var(--sb-accent-contrast); }

/* --- PATCH: global overflow & mobile safety (v1) --- */
/* Kill horizontal scroll everywhere */
html, body { max-width:100%; overflow-x:hidden; }

/* Prevent containers from exceeding viewport width */
.container, .wrap, .page, .content, .main, .site, .shell, .layout, .layout-inner {
  max-width:100%;
}

/* Header safety: don't let user chip push width */
header, .site-header, .topbar { max-width:100%; overflow-x:hidden; }
.site-header .header-right, .header-right, .nav-right, .topbar-right {
  min-width:0; display:flex; align-items:center; gap:8px;
}
/* Truncate long usernames in header */
.site-header .username, .header .username, .header-right .username, [class*="user"] .username, .header [class*="name"] {
  max-width:40vw; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}

/* Keep small chips from forcing width */
.pill, .badge, .chip { white-space:nowrap; }

/* Media should never overflow */
img, video { max-width:100%; height:auto; display:block; }

/* Generic two-col layouts collapse on mobile */
@media (max-width: 900px){
  .layout-2, .grid-2, .deal-layout, .deal-grid { grid-template-columns: 1fr !important; }
  .right-col, .deal-right, .deal-right-col { width:auto; min-width:0; }
  .metrics--static, .deal-actions { flex-wrap: wrap; gap: 10px; }
}

/* --- PATCH: global overflow & header wrap (v2) --- */
/* 1) Make padding count inside widths */
*, *::before, *::after { box-sizing: border-box; }

/* 2) Kill horizontal scroll site-wide */
html, body { max-width:100%; overflow-x:hidden; }

/* 3) Prevent common containers from exceeding viewport */
.container, .wrap, .page, .content, .main, .site, .shell, .layout, .layout-inner { max-width:100%; }

/* 4) Header: allow flex children to shrink and wrap */
header, .site-header, .topbar { max-width:100%; overflow-x:hidden; }
.site-header .header-row, .site-header .row, header .row { display:flex; flex-wrap:wrap; }
.site-header [class*="right"], header [class*="right"], .topbar [class*="right"] { 
  display:flex; align-items:center; gap:8px; min-width:0; flex-wrap:wrap;
}
.site-header [class*="left"], header [class*="left"] { min-width:0; }

/* 5) Username / user chip: never push layout wider than viewport */
.username, .user-chip, .user, [class*="user"] .name, .header .name {
  max-width:45vw; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}

/* 6) Metric/action strips can wrap on small screens */
.metrics--static, .deal-actions { flex-wrap:wrap; gap:10px; }

/* 7) Media should never overflow */
img, video { max-width:100%; height:auto; display:block; }

/* 8) Generic two-col layouts collapse on mobile */
@media (max-width: 900px){
  .layout-2, .grid-2, .deal-layout, .deal-grid { grid-template-columns: 1fr !important; }
  .right-col, .deal-right, .deal-right-col { width:auto; min-width:0; }
}

/* --- PATCH: header mobile wrap & hide leaderboard on narrow --- */
.global-header{ max-width:100%; overflow-x:hidden; }
.global-header .nav-links{ display:flex; flex-wrap:wrap; gap:10px; min-width:0; }
.global-header .user-wrap{ min-width:0; }
.global-header .username{ max-width:40vw; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }

@media (max-width: 430px){
  .global-header .nav-links a[href*="leaderboard"]{ display:none !important; } /* hide Leaderboard on very small screens */
}

/* A11y: visible focus ring */
:focus-visible { outline: 2px solid #2563eb; outline-offset: 2px; }


/* Image: keep full view, no crop */
.deal-media img{ width:100%; height:auto; max-height:450px; object-fit:contain; }


/* Sticky bar: mobile only */
@media (min-width:901px){ #sticky-bar, .deal-sticky{ display:none !important; } }
